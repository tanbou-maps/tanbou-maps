<!-- メインコンテナ - 全体のレイアウトを制御 -->
<div class="container mx-auto px-4 py-8">
  <!-- 最大幅を制限し、中央寄せにするためのラッパー -->
  <div class="max-w-4xl mx-auto">
    <!-- ヘッダーセクション - タイトルとアクションボタンを含む -->
    <div class="mb-8">
      <div class="flex items-center justify-between">
        <!-- スポット名をタイトルとして表示 -->
        <h1 class="text-3xl font-bold text-gray-900"><%= @spot.name %>のレビュー</h1>
        <!-- アクションボタングループ -->
        <div class="flex gap-4">
          <!-- 新規レビュー投稿ボタン -->
          <%= link_to new_spot_review_path(@spot), class: "bg-blue-600 text-white rounded-lg px-4 py-2 hover:bg-blue-700" do %>
            レビューを投稿
          <% end %>
          <!-- スポット詳細に戻るリンク -->
          <%= link_to spot_path(@spot), class: "text-blue-600 hover:text-blue-800" do %>
            スポット詳細に戻る
          <% end %>
        </div>
      </div>
    </div>

    <!-- レビュー一覧セクション -->
    <div class="space-y-6">
      <!-- レビューの有無による条件分岐 -->
      <% if @reviews.any? %>
        <!-- 各レビューのループ処理 -->
        <% @reviews.each do |review| %>
          <!-- レビュー詳細へのリンクラッパー -->
          <%= link_to spot_review_path(@spot, review), class: "block" do %>
            <!-- 個別レビューカード -->
            <div class="bg-white shadow rounded-lg p-6 hover:shadow-lg transition-shadow duration-200">
              <!-- レビューヘッダー（評価と日付） -->
              <div class="flex items-center justify-between mb-4">
                <!-- 星評価の表示 -->
                <div class="flex items-center">
                  <div class="flex">
                    <% review.rating&.times do %>
                      <!-- 星アイコンのSVG -->
                      <svg class="w-5 h-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                    <% end %>
                  </div>
                </div>
                <!-- 投稿日時の表示 -->
                <span class="text-sm text-gray-500">
                  <%= l review.created_at, format: :long %>
                </span>
              </div>

              <!-- レビューコメント -->
              <p class="text-gray-700 mb-4"><%= review.comment %></p>

              <!-- 画像表示セクション -->
              <% if review.images.attached? %>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4">
                  <% review.images.each do |image| %>
                    <div class="relative aspect-w-16 aspect-h-9 rounded-lg overflow-hidden">
                      <%= image_tag image, class: "absolute inset-0 w-full h-full object-cover" %>
                    </div>
                  <% end %>
                </div>
              <% end %>
            </div>
          <% end %>
        <% end %>
      <% else %>
        <!-- レビューが存在しない場合のメッセージ -->
        <div class="text-center py-8 text-gray-500">
          まだレビューはありません。最初のレビューを投稿してみましょう！
        </div>
      <% end %>
    </div>
  </div>
</div>
